<template>
    <div class="slds-card tho-card_smart tho-card_smart-mobile-darken slds-p-around_large">
        <div class="slds-text-heading_medium slds-m-bottom_medium slds-hide tho_show-in-community">Comments</div>

        <div class="slds-p-bottom_large slds-container_medium" onchange={handleChange}>
            <lightning-textarea
                                placeholder="Write a new comment..."
                                variant="label-hidden"
                                name="text"
                                value={form.text}
                                maxlength="4000"></lightning-textarea>

            <div class="slds-grid slds-grid_vertical-align-center slds-p-top_medium">
                <lightning-button
                                  type="submit"
                                  variant="brand"
                                  label="Submit Comment"
                                  disabled={disableSave}
                                  onclick={handleSave}></lightning-button>
                <lightning-input
                                 type="checkbox"
                                 label="Public"
                                 name="isPublic"
                                 checked={form.isPublic}
                                 class="slds-m-left_medium tho_hide-in-community"></lightning-input>
            </div>
        </div>

        <c-loading-spinner if:true={loading.save} type="static-small"></c-loading-spinner>
        <template for:each={comments} for:item="c">

            <div key={c.key} class={c.itemClass}>
                <div class="slds-text-heading_small slds-m-top_x-small">
                    {c.name}>
                </div>
                <div class="slds-text-body_regular">
                    <c-formatter format="datetime" value={c.date}></c-formatter>
                </div>
                <div class="slds-m-top_small slds-text-body_regular">
                    <c-read-more text={c.message} body-class="slds-container_medium"></c-read-more>
                </div>
            </div>

        </template>

        <c-loading-spinner if:true={loading.list} type="absolute"></c-loading-spinner>
    </div>
</template>